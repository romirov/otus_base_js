(()=>{"use strict";async function e(e){const t=`https://api.openweathermap.org/data/2.5/weather?units=metric&q=${e}&appid=7881bfb7be02c74633e5fdee4ff41329`;try{const e=await fetch(t);return await e.json()}catch(e){return console.error("Could`t find current location information by ip, because:",e),null}}function t(e){const t=e.name,n=e.main.temp,o=e.weather[0].icon,c=document.getElementById("selectedCityMap"),a=document.getElementById("selectedCityWeather"),r=document.createElement("img");r.src=async function(e,t){const n=`https://static-maps.yandex.ru/v1?lang=ru_RU&ll=${e},${t}&z=9&size=450,450&apikey=b7c1948d-26fc-46fa-bae3-f5d8ae0f2862`;try{return(await fetch(n)).createObjectURL}catch(e){return console.error("Could`t get a map by coordinate:",e),null}}(e.coord.lat,e.coord.lon);const i=document.createElement("p");i.textContent=`City: ${t} Temperature: ${n} Icon: ${o}`,c.appendChild(r),a.appendChild(i)}!async function(){t(async function(){const t=await async function(){try{return(await fetch("https://get.geojs.io/v1/ip/geo.json")).json()}catch(e){return console.error("Could`t find current location information by ip, because:",e),null}}();return await e(t.city)}());const n=document.getElementById("button");n.addEventListener("click",(()=>{const o=document.getElementById("userInput");if(o.innerText){const n=o.innerText;console.log(`Ввели город ${n}`),function(e){const t=localStorage.length;if(null==localStorage.getItem(e))if(t<10)localStorage.setItem(e,e);else{const t=localStorage.key(0);localStorage.removeItem(t),localStorage.setItem(e,e)}}(n),t(e(n))}else alert("В поле userInput ничего не введено!");n.removeEventListener("click")}));const o=document.getElementById("memorizedCities");({...localStorage}).forEach((e=>{const n=document.createElement("li"),c=document.createElement("a");c.href="",c.setAttribute("id","link"),c.innerText=e,c.addEventListener("click",(()=>{console.log(`Нажали на ссылку с сохраненным городом ${e}`),t(e),c.removeEventListener("click")})),n.appendChild(c),o(n)}))}()})();